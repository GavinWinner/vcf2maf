# Reference: http://docs.travis-ci.com/user/languages/perl/
language: perl
perl:
  - "5.22"


env:
  - VEP_PATH=$HOME/vep VEP_DATA=$HOME/.vep VER=91 PERL5LIB=$VEP_PATH:$PERL5LIB PATH=$VEP_PATH/htslib:$PATH

before_install:
  - sudo apt-get install -y curl rsync tar make perl perl-base build-essential libncurses-dev libexpat1-dev libssl-dev libmysqlclient-dev libxml2-dev
  - cpanm --notest JSON JSON::Parse XML::Parser XML::Simple LWP LWP::Simple LWP::Protocol::https Archive::Extract Archive::Tar Archive::Zip CGI DBI Time::HiRes DBD::mysql Bio::Perl

install:
  - git clone https://github.com/Ensembl/ensembl-vep.git
  - cd ensembl-vep
  - travis_wait 120 sleep infinity &
    perl INSTALL.pl --AUTO acf --SPECIES danio_rerio  --ASSEMBLY Zv9 --CACHEDIR $VEP_DATA
  ## - perl INSTALL.pl --AUTO acf --SPECIES homo_sapiens --ASSEMBLY GRCh37 --CACHEDIR $VEP_DATA

script:
  - perl vcf2maf.pl --input-vcf tests/test.vcf --output-maf tests/test.vep.maf --custom-enst data/isoform_overrides_at_mskcc --vep-forks 1